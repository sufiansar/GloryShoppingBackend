model Order {
  id        String @id @default(uuid())
  userId    String?
  guestId   String?
  status    OrderStatus @default(PENDING)
  amount      Float
  orderDate   DateTime     @default(now())
  shipment    Shipment?    @relation("OrderShipment")
  payment     Payment?     @relation("OrderPayment")
  transaction Transaction? @relation("OrderTransaction")
  items     OrderItem[]
  delivery  Delivery?
  user      User? @relation(fields: [userId], references: [id],onDelete: SetNull)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId])
}

model OrderItem {
  id               String @id @default(uuid())
  orderId          String
  productVariantId String
  quantity         Int
  price            Float
  product          String?
  order   Order          @relation(fields: [orderId], references: [id], onDelete: Cascade)
  variant ProductVariant @relation(fields: [productVariantId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Delivery {
  id        String @id @default(uuid())
  name      String?
  email     String?
  orderId   String @unique
  address   String
  city      String
  phone     String
  postalCode String?
  deliveryCharge Float?
   deliveryZone   String?   
  status    DeliveryStatus @default(PROCESSING)
  order     Order @relation(fields: [orderId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

