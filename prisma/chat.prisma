model Chat {
  id        String        @id @default(uuid())
  userId    String
  user      User          @relation("UserChats", fields: [userId], references: [id], onDelete: Cascade)
  status    CART_EVENT  @default(PENDING)
  messages  ChatMessage[]
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt

  @@index([userId])
}

model ChatMessage {
  id        String   @id @default(uuid())
  chatId    String
  chat      Chat     @relation(fields: [chatId], references: [id], onDelete: Cascade)
  senderId  String
  sender    User     @relation(fields: [senderId], references: [id], onDelete: Cascade)
  content   String?
  type      String   @default("TEXT")
  url       String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([chatId, senderId])
}
